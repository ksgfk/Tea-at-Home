<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>Test Query</title>
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
    <script type="text/javascript">
        $(function () {
            $('#login').click(() => {
                $.ajax(
                    {
                        type: "post",
                        url: 'user/login',
                        data: JSON.stringify({
                            username: $('#login_usr').val(),
                            password: $('#login_pwd').val(),
                        }),
                        dataType: "json",
                        contentType: 'application/json',
                        success: function (data) {
                            console.log(data);
                        }
                    }
                ).fail(function () {
                    console.log("服务器错误");
                });
            });
            $('#refresh').click(() => {
                $.ajax(
                    {
                        type: "get",
                        url: 'user/query_info',
                        success: function (data) {
                            console.log(data);
                        }
                    }
                ).fail(function () {
                    console.log("服务器错误");
                });
            });
            $('#logout').click(() => {
                $.ajax(
                    {
                        type: "get",
                        url: 'user/logout',
                        success: function (data) {
                            console.log(data);
                        }
                    }
                ).fail(function () {
                    console.log("服务器错误");
                });
            });
            $('#add_depo').click(() => {
                $.ajax(
                    {
                        type: "post",
                        url: 'depository/add',
                        data: JSON.stringify({
                            name: $('#depo_name').val(),
                            address: $('#depo_addr').val(),
                        }),
                        dataType: "json",
                        contentType: 'application/json',
                        success: function (data) {
                            console.log(data);
                        }
                    }
                ).fail(function () {
                    console.log("服务器错误");
                });
            });
            $('#mod_depo').click(() => {
                let sendData = {};
                sendData.id = parseInt($('#depo_mod_id').val(), 10);
                let modName = $('#depo_mod_name').val();
                let modAddr = $('#depo_mod_addr').val();
                if (modName.length > 0) {
                    sendData.name = modName;
                }
                if (modName.length > 0) {
                    sendData.address = modAddr;
                }
                $.ajax({
                    type: "post",
                    url: 'depository/modify',
                    data: JSON.stringify(sendData),
                    dataType: "json",
                    contentType: 'application/json',
                    success: function (data) {
                        console.log(data);
                    }
                }).fail(function () {
                    console.log("服务器错误");
                });
            });
        });
    </script>
</head>

<body>

<label>用户名:<input type="text" id="login_usr"></label><br>
<label>密码:<input type="text" id="login_pwd"></label><br>
<button id="login">登录</button>
<br>

<button id="refresh">获取</button>
<br>
<button id="logout">登出</button>

<br><br><br>
<label>仓库名字:<input type="text" id="depo_name"></label><br>
<label>仓库地址:<input type="text" id="depo_addr"></label><br>
<button id="add_depo">添加仓库</button>

<br><br><br>
<label>地址id:<input type="text" id="depo_mod_id"></label>
<label>新仓库名字:<input type="text" id="depo_mod_name"></label><br>
<label>新仓库地址:<input type="text" id="depo_mod_addr"></label><br>
<button id="mod_depo">添加仓库</button>

</body>

</html>